# OpenClaw 进阶高阶完全指南（精简总结版）

> 本仓库是对原文《OpenClaw 从中级到高级完整教程》核心内容的精华提取与结构化整理。旨在帮助完成 OpenClaw 基础配置的用户，快速构建一套成熟可靠的“赛博团队”与企业级工作流。

---

## 核心七步法

### 1. 制定员工手册与启动规范（`AGENTS.md`）
* **定位**：如果 `SOUL.md` 是性格，那 `AGENTS.md` 就是工作准则。
* **流程定义**：将会话启动标准化。主会话（Main Session）需全量加载索引记忆（`MEMORY.md`），普通的子任务和群聊会话只需轻量化加载当日/昨日基础日志，避免敏感信息泄露或 Token 浪费。
* **权限划分**：为 AI 设置隔离边界。检索和整理 workspace 内文件可自由执行；向外部（推特、邮件等）发送内容前必须跟用户确认。

### 2. 修建防失忆的长程记忆护城河
* **启用 `memoryFlush`**：通过设置软防洪堤（如 `softThresholdTokens: 4000`），避免长对话触碰极限导致旧下文被粗暴压缩。快满时提前将重要洞察持久化写入文件。
* **向量检索优化**：让日志结构化、主题单一化。**“记录结论而非过程”**。加上 `#标签` 能成倍提升 `memorySearch`（比如 `bge-m3` 模型下）的精准度。
* **定期“洗脑”（Auto Maintenance）**：通过 `HEARTBEAT.md` 或 Cron 每周自动清洗一周以来的流水账日志。吸取核心业务复盘放入 `lessons.md` / `projects.md`，清理垃圾和一次性废话，保持记忆索检的纯金度。

### 3. 多线程“影分身”（子 Agent 并发）
* **痛点**：单线程处理大量资料（如收集五个竞品网站资料）效率极低。
* **解决方案**：在核心配置（`openclaw.json`）中开启 `subAgents` 并发能力。让主控节点成为“项目经理”角色，随时分解并同时派发 3~5 个子进程，完成异步执行、最终合并汇报的高效模式。
* **注意**：大块的爬虫分析可拆；连续的创造写作不可拆。

### 4. 彻底的自动化（Cron 任务）
* **定位**：解放双手、变“召之即来”为“不请自报”的定时任务管理器。
* **用法**：使用标准的 Cron 表达式（如 `0 8 * * *` 的朝八晚五制）结合指定时区 `Asia/Shanghai` 编写独立配置文件并存入 `/crons/`。
* **实战场景**：早安简报与日程提醒、周末服务器巡检防灾、特定项目的交易复盘播报。

### 5. 将经验沉淀成可复用技能（自定义 Skill）
* **定位**：将固定的长链路SOP打包为标准扩展。包含 `SKILL.md` (说明/工作流) 和 `config.json` (默认配置与第三方 Token)。
* **好处**：降低交互门槛，统一输出格式，并可以将自己打通的网络与经验随时发布开源至社区。比如撰写一个【天气插件】或【日志质检专家】。

### 6. 全平台多终端同步（网关配置）
* **矩阵架构**：让同一个脑子响应不同平台的调用。通过编辑 `openclaw.json` 的 `gateways` 模块实现。
* **应用组合**：Telegram用于接收高度私密的紧急告警提醒；Discord做团队内群聊对接协理；WebChat留给临时/公共查阅的网页呈现。并支持写 `routing` 规则让消息精确定向某个终端转发。

### 7. 榨干每一美分（性能与成本调控）
* **温控（Temperature）**：写代码用 `0.3-0.5`（严谨），聊闲天用 `0.7`（鲜活），做头脑风暴用 `1.0`（发散）。
* **降本大招**：
  1. 启用 `cache` 拦截和重复过滤常用命令；
  2. 主模型选聪明的（如 `claude-3-5-sonnet/gemini-pro`），对内部的纯脏活子 Agent 降级选便宜大碗的模型（如 `gpt-4o-mini/gemini-flash`）。
  3. 配置每日消费熔断上限（如 `$10`），避免子 Agent 卡在死循环里把号刷爆（`billing.limits`）。
